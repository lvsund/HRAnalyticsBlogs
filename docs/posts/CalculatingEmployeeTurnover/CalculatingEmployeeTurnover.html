<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lyndon Sundmark, MBA">
<meta name="dcterms.date" content="2014-11-25">

<title>HRAnalyticsBlogs - Is it Time To Take Another Look at How to Calculate Employee Turnover?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">HRAnalyticsBlogs</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Is it Time To Take Another Look at How to Calculate Employee Turnover?</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">HR Analytics</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Lyndon Sundmark, MBA </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 25, 2014</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#turnover-calculations-based-on-an-average-for-the-denominator" id="toc-turnover-calculations-based-on-an-average-for-the-denominator" class="nav-link" data-scroll-target="#turnover-calculations-based-on-an-average-for-the-denominator">Turnover Calculations Based On an Average for the Denominator</a></li>
  <li><a href="#turnover-calculations-based-on-the-end-of-the-period-count-of-employees-for-denominator" id="toc-turnover-calculations-based-on-the-end-of-the-period-count-of-employees-for-denominator" class="nav-link" data-scroll-target="#turnover-calculations-based-on-the-end-of-the-period-count-of-employees-for-denominator">Turnover Calculations Based on the End of the Period Count of Employees for Denominator</a></li>
  <li><a href="#turnover-calculations-based-on-the-beginning-of-the-period-count-of-employees" id="toc-turnover-calculations-based-on-the-beginning-of-the-period-count-of-employees" class="nav-link" data-scroll-target="#turnover-calculations-based-on-the-beginning-of-the-period-count-of-employees">Turnover Calculations Based on the Beginning of the Period Count of Employees</a></li>
  <li><a href="#final-thoughts" id="toc-final-thoughts" class="nav-link" data-scroll-target="#final-thoughts">Final Thoughts</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="CalculatingEmployeeTurnover.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li><li><a href="CalculatingEmployeeTurnover.docx"><i class="bi bi-file-word"></i>MS Word</a></li><li><a href="CalculatingEmployeeTurnover.epub"><i class="bi bi-file"></i>ePub</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Employee turnover is a very common HR metric of interest to many organizations.</p>
<p>One of the things I have found, over the years, in HR metrics related projects - is that clarity, definitiveness, and consistency of definitions are all strong ingredients to usable HR metrics. HR ‘metrics’ are of course measures. And for measures to be useful they must be ‘valid’ and ‘reliable’. ‘Valid’ means that they measure what they are supposed to measure. ‘Reliable’ means that it does it consistently. Take away clarity, consistency etc. and metrics lose their utility.</p>
<p>Recently I decided to do a quick Google search on how employee turnover was defined and how to calculate it. Admittedly this isn’t overly scientific or deep. And it wasn’t intended to be. But I was interested in seeing how consistent the recommended definitions and suggested formulas for calculating turnover were.</p>
<p>The good news was that there seemed to be relatively common definitions for turnover and for formulas as to how to calculate it.</p>
<p>The bad news was that even though the formula itself was relatively common- how to calculate portions of that formula were not.</p>
<p>What exactly did I find? Consider the following definition and formula:</p>
<p>Definition</p>
<p>Generally the definitions from the traditional typical dictionaries (Merriam Webster, Cambridge, and Oxford) centered on something like the following:</p>
<p>Turnover is the rate at which people leave a company.</p>
<p>A rate, in turn, is generally concerned with the frequency or speed of something. Often it is expressed over the measurement of time. We are not only concerned with how many people leave an organization, but over what period of time.</p>
<p>And for context it is often of less concern what the absolute number of people were that left but really what proportion of people left the organization out of the total number of people in the organization. So really what we are concerned with is the proportion in any given time period.</p>
<p>Formula</p>
<p>Given the above definition, it is not surprising that a common formula for turnover was:</p>
<p>Employee Turnover = the number of people who left the organization / the number of employees</p>
<p>What’s implied in this formula is that it still must be within the context of ‘time’ to have any meaning. It’s the number of employees who left over a period of time. So the formula is relatively consistent with the definition.</p>
<p>What was not common in the Google search was how to calculate the number of employees.</p>
<p>I came across at least 3 unique (non-repeating) suggestions for the denominator in my Google search:</p>
<p>The ‘average’ number of employees for the time period The number of employees at the end of the time period The number of employees at the beginning of the time period The ‘average’ in first suggestion above was calculated by taking the opening and closing balance for the time period in question (often a month), and dividing by 2.</p>
<p>As mentioned previously, for any of you who have been charged with responsibility of providing HR metrics in your organization - having absolute clarity and consistency in your definitions (turnover or any HR metric) is essential if you are going to provide meaningful HR metrics information. In fact when getting into an organization project of creating HR metrics, often the time take to define them and determining formulas for them and getting agreement on these can take as long as the technical development of these in a data warehouse itself.</p>
<p>If a basic Google search indicates that there are at least 3 possible ways of calculating the denominator, that doesn’t exactly provide ‘desired’ consistency. And if different organizations make different choices as to how to calculate number of employees, you can probably appreciate the danger of asking another organization the question of ‘what is their employee turnover rate?’ without also asking them ‘how exactly do you calculate that?’ As importantly, for our own metrics and calculations- we have to also ask –‘how exactly do we calculate that?’ Given the options, how do we choose?</p>
<p>As I try to answer that question, I have no intent or desire of ‘absolving’ you from the responsibility of making your own choice. How you calculate it is based on your needs in your organization. Sometimes your choice will be based on regulatory requirements. Sometimes the choice is open for you. Sometimes it’s both- if you consider having more than one metric for turnover. What I do desire to do is to assist you in understanding further what you are really measuring, given these 3 choices, and perhaps suggest some criteria for your choice, when the choice is not regulatory. Let’s look at each of the calculation options further:</p>
</section>
<section id="turnover-calculations-based-on-an-average-for-the-denominator" class="level1">
<h1>Turnover Calculations Based On an Average for the Denominator</h1>
<p>Employee Turnover = the number of people who left the organization /Number of Employees (Average)</p>
<p>The idea behind taking an ‘average’ is that for the time period of concern –the denominator may change. Even in an often typical smallest time period of interest for HR metrics- a ‘month’- if people leave and come into the organization, ‘number of people’ is not constant for the whole month. Indeed, typically the following is the case for any given time period:</p>
<p>Average Employee Count= (Opening Count of Employees for the Period + Ending Count of Employees for the Period) /2</p>
<p>The argument here is that since the number of employees is not constant during the month- we can or should ‘negate’ the variation by taking an average employee count. The same principle would apply whether we are dealing with month, quarter, or years as the time period under consideration. On the surface this has an appealing logic. Since the count of employees will change during the period of time in question- we feel this would be a more ‘representative’ figure for the time period in question.</p>
<p>But let’s dig a little deeper. ‘What exactly are we measuring and what do we really have when we calculate an average for the denominator?’</p>
<p>We definitely have an ‘arithmetic’ construct- the average. But for this metric we also have the inclusion of hiring information and termination information in the denominator. Why? Because to get the ending balance for a time period (in the formula above), we must base it on the opening balance and then the changes during the time period. The changes to an employee population in any time period are reflected in the hires AND terminates within that same time period.</p>
<p>Ending Balance= Opening Balance – Terminates + Hires</p>
<p>205= 200-25+30</p>
<p>Since the ending balance for that time period is part of the denominator, it means we have hires count and terminates count in the denominator for turnover. ( Per the above formula for average employee count)</p>
<p>Average Employee Count= (opening count + (opening count – terminates + hires))/2</p>
<p>And it means that the turnover calculation using an average of opening and closing balances is really comparing the count of terminates for the period over both the original balance and the changes (hires and terminates) for that time period. Aside from hires now being introduced into the denominator, we are actually also negating terminates from the opening balance in the denominator.</p>
<p>So if it weren’t for the ‘hires’ being included, terminates are not based on just the opening balance but rather the opening balance less the terminates. And then this averaged with the opening balance of the denominator too. This hardly makes sense to me personally. Especially if we consider a scenario where there were no hires in the time period. Your equation for the denominator then becomes:</p>
<p>(Opening balance + (opening balance- terminates+hires))/2</p>
<p>Example denominator: (200 + (200-25+0))/2</p>
<p>You are taking the opening balance of 200 above and adding that number again and subtracting the terminates of 25). Then you are dividing that by 2 to get an average. And THEN you put the numerator of the number of terminates over that. Let’s see- turnover in this calculation means that we are dividing the number of those who terminated by an average of something that includes the hires and also negates the terminates in the denominator as well. Confused? I AM.</p>
<p>Arithmetic construct? Yes. Justifiable logic as to meaningfulness of the denominator? What do you think?</p>
</section>
<section id="turnover-calculations-based-on-the-end-of-the-period-count-of-employees-for-denominator" class="level1">
<h1>Turnover Calculations Based on the End of the Period Count of Employees for Denominator</h1>
<p>This approach for calculating the contents of the denominator suffers from many of the same issues as the previous suggestion. The only thing that is better here is that at least it’s not an average for the sake of having an average.</p>
<p>Ending balance always is the opening balance minus the terminates plus the hires for a time period.</p>
<p>Let’s look again what happens if there were no hires in a given time period for a closing balance.</p>
<p>(Opening balance – terminates + hires)</p>
<p>Example denominator: (200-25+0)</p>
<p>So once again you have hires in a turnover (terminates) calculation. And if there were no hires in that time period your turnover formula is really doing a calculation of terminates over the opening balance minus those terminates. You are actually basing your terminates over a denominator that has already been reduced by the terminates.</p>
<p>Example turnover: 25/ (200-25+0)</p>
<p>Does this make sense?</p>
</section>
<section id="turnover-calculations-based-on-the-beginning-of-the-period-count-of-employees" class="level1">
<h1>Turnover Calculations Based on the Beginning of the Period Count of Employees</h1>
<p>The previous two options for denominator introduce the ‘terminates’ and the ‘hires’ in the denominator. It’s like double counting the impact of the ‘terminates’ and adding ‘hires’ into a calculation that should be about ‘terminates’. Can this be avoided? Yes – if we agree that hires have nothing to do with turnover and that terminates have no place in the denominator either- because it is double counting. How? By having the count of employees based the opening or beginning balance of the employee count for the time period.</p>
<p>Why is this the case?</p>
<p>First of all let’s look more closely at what an opening count is. An opening count in this case means the count of something before anything else can occur that would change it. What could change it? Hires and terminates for the current period. For time purposes, a new time period is often demarcated by midnight. Any transactions recorded before midnight are categorized to be the previous time period, any at or after are categorized into the current time period. This is true whether the time period is a day, month, quarter, semester, or year –when we are at the end of any of these. It also might be useful to think in terms of:</p>
<p>Opening Balance of Current Time Period = Closing Balance for previous time period.</p>
<p>The closing balance for the previous time period would be just before midnight where no other transactions logged could be possible either by time itself or by organizational intention and design.</p>
<p>If the terminates occur anywhere in the present time period, they must be compared or based against the previous period’s closing balance/current period opening balance to NOT be double counted in the formula.</p>
<p>If we can see how this makes sense on a day by day time period calculation, we can understand that when we are concerned with longer time period like a month, the last ‘month’ population that the terminates belonged to is not the current month (end of this month) but rather were part of the previous months employee population. By definition, they are terminates in the ‘current’ time period. So quite aside from the interaction of terminates and hires in the denominator with the previous two options, this option makes sense intuitively even without that interaction impact.</p>
</section>
<section id="final-thoughts" class="level1">
<h1>Final Thoughts</h1>
<p>As mentioned earlier- every organization has to make its own decision as to how it will calculate turnover (and the number of employees in the denominator). Sometimes the decision is made for you because it is a regulatory requirement for some purpose. Other times it is not.</p>
<p>None of the discussion in this article is here to suggest or imply that you as the reader need to change your current definitions or calculations. That’s really your decision and responsibility based on your needs.</p>
<p>But perhaps I can leave you with some closing thoughts or suggested criteria for your choice, whether it be for regulatory or other purposes:</p>
<p>Is there a reasoning behind why you are calculating it the way you are calculating it? If a regulatory reason requires one of the above 3 choices in your denominator, then that is reason enough for ‘that’ purpose. Can you have multiple turnover measures for different purposes? Some may be for regulatory purposes, some for benchmarking with other organizations. These may require different calculations. If the purpose for the calculation is for comparison to other organizations, how do they calculate the denominator? Is their entire formula the same? If so, your purposes are met. If not, another formula may be required for that specific purpose or intent. If there is no regulatory required definition for your employee turnover metric, does your metric really measure what you think it measures? And if you have more than one calculation for turnover, are your definitions and terminology allowing you to distinguish between them and still have clarity, meaningful dialogue, and a reaching of all the purposes intended? What do you think?</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>